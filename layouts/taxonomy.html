{{ define "main" }}
  {{- $title := replaceRE "[-_]+" " " .Title | title }}
  <article>
    <h1>{{ $title }}</h1>
    {{ .Content }}

    {{ if or (eq .Data.Plural "tags") (eq .Data.Plural "categories") }}
      <div class="multi-column">
        {{- $current := "" }}
        {{- range .Data.Terms.Alphabetical }}
          {{- $first := upper (substr .Term 0 1) }}
    
          {{- if ne $first $current }}
            {{- if ne $current "" }}
              </ul>
            </div>
            {{- end }}
    
            <div class="multi-column__item taxonomy">
              <h2 class="taxonomy__label" style="margin: 0;">{{ $first }}</h2>
              <ul class="taxonomy__list">
            {{- $current = $first }}
          {{- end }}
    
          <li class="taxonomy__item">
            <a href="{{ .Page.RelPermalink }}" class="taxonomy__link">
              {{- $term := replaceRE "[-_]+" " " .Term | title }}
              <span>{{ $term }}</span>
              <span>{{ .Count }}</span>
            </a>
          </li>
        {{- end }}
        </ul>
      </div>
    {{ else }}
      <div class="taxonomy">
        <ul class="taxonomy__list" style="padding: 0; list-style: none;">
          {{ range .Data.Terms.ByCount }}
            {{- $term := replaceRE "[-_]+" " " .Term | title }}
            <li class="taxonomy__item">
              <a href="{{ .Page.RelPermalink }}" class="taxonomy__link" style="border-block-end: 1px dotted var(--border-base);">
                <span>{{ $term }}</span>
                <span>{{ .Count }}</span>
              </a>
            </li>
          {{ end }}
        </ul>
      </div>
    {{ end }}
  </article>
{{ end }}
